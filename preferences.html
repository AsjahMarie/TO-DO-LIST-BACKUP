<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CheckMate - Preferences</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <script src="https://kit.fontawesome.com/4b5b4d807f.js" crossorigin="anonymous"></script>
</head>
<body>
    <header id="topBanner"><h1>CheckMate</h1></header>
    <nav class="navbar">
        <a href="homepage.html">Home<i class="fa-sharp fa-solid fa-house-user fa-beat fa-lg" style="color: #00364a;"></i></a>
        <a href="NEWtaskList.html">Task List<i class="fa-solid fa-list-check fa-beat fa-lg"></i></a>
        <a href="NEWcalendarView.html">Calendar<i class="fa-regular fa-calendar-days fa-beat fa-lg"></i></a>
        <a href="preferences.html" style="background-color: #f3fdfe;">Preferences<i class="fa-solid fa-user-gear fa-beat fa-lg"></i></a> 
    </nav>
    <div class="settingsContent">
        <h1>Preferences</h1>
        <div>
            <h2>Dark Mode or Light Mode? Click the button above</h2>
            <script>
                  document.addEventListener('DOMContentLoaded' , function() {
            //Checks if Dark Mode Preference is Stored
            const isDarkMode = localStorage.getItem('darkMode') === 'true';

            // Apply dark mode if the preference is true
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
            }

            // Toggle dark mode on button click
            const darkModeToggle = document.createElement('button');
            darkModeToggle.textContent = isDarkMode ? 'Light Mode' : 'Dark Mode';
            darkModeToggle.style.position = 'fixed';
            darkModeToggle.style.top = '10px';
            darkModeToggle.style.right = '10px';
            darkModeToggle.setAttribute('id','darkModeButton');
            document.body.appendChild(darkModeToggle);

            darkModeToggle.addEventListener('click', function () {
                // Toggle dark mode class
                document.body.classList.toggle('dark-mode');

                // Update and store the preference
                const currentMode = document.body.classList.contains('dark-mode');
                localStorage.setItem('darkMode', currentMode.toString());

                // Update button text
                darkModeToggle.textContent = currentMode ? 'Light Mode' : 'Dark Mode';
            });
        });
            </script>
        </div>
        <div>
        <div>
            <h2>User</h2>
            <button onclick="logout()">Log Out</button>

            <!-- Update Email Section -->
            <div>
                <!---->
                <h2>Update Email</h2>
                <p id="currEmail"></p>
                <label>New Email:
                    <input type="email" id="newEmail">
                </label>
                <button onclick="updateEmail()">Update Email</button>
            </div>

            <!-- Change Username Section -->
            <div>
                <h2>Change Username</h2>
                <p id="currUser"></p>
                <label>New Username:
                    <input type="text" id="newUsername">
                </label>
                <button onclick="changeUsername()">Change Username</button>
            </div>

            <!-- Change Password Section -->
            <div>
                <h2>Change Password</h2>
                <label>New Password:
                    <input type="password" id="newPassword">
                </label>
                <button onclick="changePassword()">Change Password</button>
            </div>
        </div>

        <!-- Notification Preferences Section  -->
        <div>
            <h2>Notification Preferences</h2>
            <label>
                <input type="checkbox" id="enableNotifications"> Enable Notifications
            </label>
        </div>
    </div>

    <script>

        // New script for handling user updates
        function updateEmail() {
            const newEmail = document.getElementById('newEmail').value;
            // Implement update email functionality here
            // For instance, you might send a request to the server to update the email
            window.localStorage.setItem('email', newEmail);
            displayEmail();
            console.log(`Updating email to: ${newEmail}`);
        }

        function changeUsername() {
            const newUsername = document.getElementById('newUsername').value;
            // Implement change username functionality here
            // For instance, you might send a request to the server to change the username
            console.log(`Changing username to: ${newUsername}`);
        }

        function changePassword() {
            const newPassword = document.getElementById('newPassword').value;
            // Implement change password functionality here
            // For instance, you might send a request to the server to change the password
            console.log(`Changing password to: ${newPassword}`);
        }

        function displayEmail(){
            const userLocation = document.getElementById('currEmail')
            const username = window.localStorage.getItem('email');
            if(username === null){
                userLocation.textContent = "no stored username";
            } else{
                location.reload;
                userLocation.textContent = username;
            }
        }
    </script>
</body>
</html>
