<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login or Sign Up</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/4b5b4d807f.js" crossorigin="anonymous" crossorigin="anonymous"></script>
</head>
<body>
    <header id="topBanner"><h1>CheckMate</h1></header>
    <!-- <nav class="navbar">
        <a href="homepage.html">Home<i class="fa-sharp fa-solid fa-house-user fa-beat fa-lg" style="color: #00364a;"></i></a>
        <a href="NEWtaskList.html">Task List<i class="fa-solid fa-list-check fa-beat fa-lg"></i></a>
        <a href="NEWcalendarView.html">Calendar<i class="fa-regular fa-calendar-days fa-beat fa-lg"></i></a>
        <a href="preferences.html">Preferences<i class="fa-solid fa-user-gear fa-beat fa-lg"></i></a>            
    </nav> -->
    <div class="index-container">
      <div class="login-container">
        <div class="forms">
            <div id="loginForm" class="form active">
                <h2>Login</h2>
                <form onsubmit="return checkUser()">
                    <input type="text" placeholder="Username" id="loginUser" required>
                    <input type="password" placeholder="Password" id="loginPass" required>
                    <button type="submit" id="logBtn">Login</button>
                </form>
                <div class="robot">
                    <label for="robot">Verify that you are not a robot</label>
                    <input type="checkbox" id="robot">
                </div>
                <div class="forgot">
                   <a href="forgot-username.html">Forgot username?</a>
                   <a href="forgot-password.html">Forgot password?</a>
                </div>
                <p>Don't have an account? <a href="user-registration.html">Sign Up</a></p>
            </div>
        </div>
    </div>
    <script>
        //function to test if user is stored in localStorage
        function checkUser(){
            const robotCheck = document.getElementById('robot');
            if(robotCheck.checked){
                const inputUsername = document.getElementById('loginUser').value;
                const storedUsername = window.localStorage.getItem('username');
                if(storedUsername === null){
                    alert('you do not have an account, please sign up.');
                } else if(storedUsername !== inputUsername){
                    alert('username does not match our data, please reenter.')
                } else {
                    checkPass();
                }
            } else {
                alert('you did not pass our robot inspection');
                setTimeout(function() {
                    // Redirect to the home page
                    window.location.href = 'index.html';
                }, 0.5);
            }

            return false; // form failed
        }
        // function to test password
        function checkPass(){
            const inputPassword = document.getElementById('loginPass').value;
            const storedPassword = window.localStorage.getItem('password');
            if (storedPassword !== inputPassword){
                alert('incorrect password please try again.');
            } else {
                console.log('checked pass');
                setTimeout(function() {
                    // Redirect to the home page
                    window.location.href = 'homepage.html';
                }, 0.5);
            }
        }
    </script>
</body>
</html>

